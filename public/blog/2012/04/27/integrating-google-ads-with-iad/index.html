
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>easily integrate your iOS app with iAd and AdMob - hello. i'm @theonlylars</title>
  <meta name="author" content="Lars Anderson">

  
  <meta name="description" content="Easily integrate iAds into your apps with just two lines of code and back them with Google's AdMob ads.">
  <meta name="keywords" content="iAd,iOS,iOS development,AdMob,iAd Integration,easy,tutorial,iAd tutorial,iOS iAd tutorial,LARSAdController">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://theonlylars.com/blog/2012/04/27/integrating-google-ads-with-iad">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="hello. i'm @theonlylars" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29343433-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">hello. i'm @theonlylars</a></h1>
  
    <h2>have you ever met another?</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:theonlylars.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/homedata">My Place</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Easily Integrate Your iOS App With iAd and AdMob</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-27T21:30:00-05:00" pubdate data-updated="true">Apr 27<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I think Apple&#8217;s iAds had great potential.  But let&#8217;s face it.  They really aren&#8217;t pulling the weight they should.  When they do have inventory, however, they often make much more than any other ad service.  Let me show you how to not only quickly integrate iAds into your app, but do it properly all while using Google&#8217;s AdMob service as a backup.</p>

<p>If you watch Apple&#8217;s WWDC video on proper integration of iAd or read the iAd implementation documentation, you will see that they want you to use a single shared instance of your ads in all of your view controllers.  Since I also wanted that instance to be backed by Google ads when there was no iAd inventory, the best solution I could think of was the singleton.  This lead me to:</p>

<h2>Introducing <a href="https://github.com/larsacus/LARSAdController">LARSAdController</a></h2>

<p>I built <a href="https://github.com/larsacus/LARSAdController">LARSAdController</a> in order to be a one-stop, single line integration of iAds (and later AdMob ads) into a <code>UIView</code>. I initially only supported iPods/iPhones in portrait orientation. It now has support for both iPods/iPhones as well as iPads in <em>any</em> orientation.</p>

<h2>Integrating <a href="https://github.com/larsacus/LARSAdController">LARSAdController</a></h2>

<ol>
<li><p>First, you will need to clone the source from <a href="https://github.com/larsacus/LARSAdController">Github</a>:</p>

<p> <code>$ git clone git@github.com:larsacus/LARSAdController.git</code></p>

<p> or add it as a git submodule:</p>

<p> <code>$ git submodule add git@github.com:larsacus/LARSAdController.git Vendor/LARSAdController</code></p></li>
<li><p>Add folder or <code>LARSAdController.m/h</code> to your project</p></li>
<li>Download and copy the <a href="https://developers.google.com/mobile-ads-sdk/download#downloadios">Google ad SDK</a> into your project and go ahead and sign up for a Google publisher account at <a href="https://admob.com">AdMob.com</a> if you haven&#8217;t already</li>
<li><p>Ensure the proper frameworks have been added to your application in order for iAds and AdMob ads to compile properly:</p>

<ol>
<li>iAd.framework</li>
<li>AudioToolbox.framework</li>
<li>MessageUI.framework</li>
<li>SystemConfiguration.framework</li>
</ol>


<p> You can add additional frameworks to your project in Xcode 4 by clicking on your project file in the project navigator on the left and going to <code>Build Phases &gt; Link Binary With Libraries &gt; Click + Symbol</code></p>

<p> Whew! What a lot of stupid setup and we haven&#8217;t even written any code, yet! If you want to write code, you may be a little disappointed by this post, because there really isn&#8217;t any.</p></li>
<li><p>Now go to <code>Product &gt; Build</code> or type &#8216;⌘+B&#8217; to build the project.  If your project builds without any errors, hurray! Skip to step 7.  If not, continue on&#8230;</p></li>
<li><span class='pullquote-right' data-pullquote='F, no, Objective-C, I don&#8217;t want ARC on this file!'>If you have errors and you followed the above <em>and</em> you&#8217;re have ARC enabled, you will need to tell the compiler not to use ARC with <a href="https://github.com/larsacus/LARSAdController">LARSAdController</a> as it is not supported, yet. Disable ARC on <a href="https://github.com/larsacus/LARSAdController">LARSAdController</a> by following the same steps in step 4 to add frameworks to a project, but go to the <code>Compile Sources</code> section. Find <code>LARSAdController.m</code> in the list of files and double-click in the region to the right marked <code>Compiler Flags</code>. Add a new flag called <code>-fno-objc-arc</code>. A good way to remember this command is to read it like this: F, no, Objective-C, I don&#8217;t want ARC on this file!.  Moving along&#8230; Hit &#8216;⌘+B&#8217; to verify everything is building correctly. </span></li>
<li><em>Now</em> we&#8217;re ready to write some code! Get your typing fingers ready, because text doesn&#8217;t just copy/paste itself! Add the following two lines of code to one of your view controller&#8217;s view lifecycle load or appear methods.  I&#8217;ve found that <code>viewWillAppear:</code> seems to be the best when pushing/popping view controllers with ads on them:</li>
</ol>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'>  <span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">viewWillAppear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="n">animated</span><span class="p">{</span>
</span><span class='line'>      <span class="p">[[</span><span class="n">LARSAdController</span> <span class="n">sharedManager</span><span class="p">]</span> <span class="nl">addAdContainerToView:</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">withParentViewController:</span><span class="n">self</span><span class="p">];</span>
</span><span class='line'>      <span class="p">[[</span><span class="n">LARSAdController</span> <span class="n">sharedManager</span><span class="p">]</span> <span class="nl">setGoogleAdPublisherId:</span><span class="n">myPublisherId</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>  If you are only supporting a single orientation, or a single set of orientations (portrait/upside down portrait), then you&#8217;re basically done.  Just add the first single line of code to any view controller that you want to host ads in. Just be sure to call <code>setGoogleAdPublisherId:</code> the first time you add LARSAdController to a view. The ads will automatically be added to the bottom of the view and appear/hide whenever they have inventory available.</p>

<h2>Multiple Orientations</h2>

<p>If you would like to support multiple orientations, you will need to add the following line to the first call you make to add LARSAdController to a view:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">[[</span><span class="n">LARSAdController</span> <span class="n">sharedManager</span><span class="p">]</span> <span class="nl">setShouldHandleOrientationChanges:</span><span class="n">YES</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will automatically listen for orientation changes and adjust the ad accordingly! See how easy that was! I told you if you were looking to type code, you were going to be disappointed.</p>

<p>Simply call the code in step 7 in any view you need the ad banner to be in, and it will automatically remove it from the old view and add it to the bottom of the new view.</p>

<h2>In Conclusion</h2>

<p>I think this is an extremely easy, proper way just to implement iAds into your app, even if you aren&#8217;t using AdMob ads.  If you&#8217;re registered to use AdMob ads, then it&#8217;s an even <em>more</em> efficient method, as it&#8217;s only one line of code more in order to integrate and you will <em>always</em> have an ad displaying in your app.</p>

<p>If you&#8217;re using <a href="https://github.com/larsacus/LARSAdController">LARSAdController</a> in your app, I&#8217;d love to know. You can send me an email if you can find it, <a href="http://github.com/larsacus/LARSAdController">fork the repo</a> and change the readme on GitHub, or even better, just send me a quick note at <a href="http://twitter.com/theonlylars">@theonlylars</a> and I&#8217;ll add it to the README file.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Lars Anderson</span></span>

      








  


<time datetime="2012-04-27T21:30:00-05:00" pubdate data-updated="true">Apr 27<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/arc/'>ARC</a>, <a class='category' href='/blog/categories/admob/'>AdMob</a>, <a class='category' href='/blog/categories/ads/'>ads</a>, <a class='category' href='/blog/categories/development/'>development</a>, <a class='category' href='/blog/categories/iad/'>iAd</a>, <a class='category' href='/blog/categories/ios/'>iOS</a>, <a class='category' href='/blog/categories/open-source/'>open-source</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://theonlylars.com/blog/2012/04/27/integrating-google-ads-with-iad/" data-via="theonlylars" data-counturl="http://theonlylars.com/blog/2012/04/27/integrating-google-ads-with-iad/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/04/26/check-out-my-new-crib/" title="Previous Post: check out my new crib">&laquo; check out my new crib</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/05/17/career-day-at-lorena-high/" title="Next Post: Career Day @ Lorena High">Career Day @ Lorena High &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section class="well">
  <h1>About me</h1>
  <p>iOS engineer at <a href="https://twitter.com/mutualmobile">@mutualmobile</a>. Builder of stuff.</p>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/06/03/house-status/">House Status</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/29/wwdc/">Dub Dub</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/17/career-day-at-lorena-high/">Career Day @ Lorena High</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/27/integrating-google-ads-with-iad/">easily integrate your iOS app with iAd and AdMob</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/26/check-out-my-new-crib/">check out my new crib</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("theonlylars", 7, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/theonlylars" class="twitter-follow-button" data-show-count="false">Follow @theonlylars</a>
  
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/larsacus">@larsacus</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'larsacus',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Lars Anderson -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
